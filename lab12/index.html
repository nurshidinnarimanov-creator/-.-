<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>JWT Login â€” Dark/Light</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Segoe UI", Arial, sans-serif;
            transition: background 0.5s ease;
        }

        body.light {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #222;
        }

        body.dark {
            background: linear-gradient(135deg, #0f0f0f, #2d2d2d);
            color: #eee;
        }

        /* ÐšÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ñ‚ÐµÐ¼Ñ‹ */
        .theme-toggle {
            position: absolute;
            top: 18px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            transition: 0.3s;
            background: rgba(255,255,255,0.2);
            color: #fff;
        }

        body.light .theme-toggle {
            background: rgba(255,255,255,0.6);
            color: #333;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° */
        .card {
            width: 340px;
            padding: 25px;
            border-radius: 16px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: cardAppear 0.8s ease forwards;
            opacity: 0;
            transform: scale(0.8);
        }

        body.light .card {
            background: rgba(255, 255, 255, 0.75);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        @keyframes cardAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        input {
            width: 100%;
            padding: 12px;
            margin-top: 12px;
            border-radius: 10px;
            border: none;
            outline: none;
            font-size: 15px;
            transition: box-shadow 0.3s;
        }

        body.light input {
            background: #fff;
            border: 1px solid #ccc;
        }

        body.dark input {
            background: rgba(255,255,255,0.1);
            border: 1px solid #444;
            color: #eee;
        }

        input:focus {
            box-shadow: 0 0 8px #7f9cf5;
        }

        button {
            width: 100%;
            padding: 14px;
            margin-top: 18px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #6c63ff, #5a52e0);
            color: white;
            font-size: 15px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.4);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body class="light">

<!-- ÐšÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ñ‚ÐµÐ¼Ñ‹ -->
<button class="theme-toggle" id="toggle-theme">ðŸŒ™</button>

<div class="card">

    <!-- Login form -->
    <div id="login-form">
        <h2>Ð’Ñ…Ð¾Ð´</h2>
        <input id="email" type="email" placeholder="E-mail" />
        <input id="password" type="password" placeholder="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ" />
        <button id="login-btn">Ð’Ð¾Ð¹Ñ‚Ð¸</button>
    </div>

    <!-- App after login -->
    <div id="app" class="hidden">
        <h2>Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!</h2>
        <p id="user-email" style="font-weight:bold; margin-bottom:20px;"></p>
        <button id="logout-btn" style="background: linear-gradient(135deg, #ff5c5c, #d64545);">
            Ð’Ñ‹Ð¹Ñ‚Ð¸
        </button>
    </div>

</div>

<script>
    /* === Ð¡ÐœÐ•ÐÐ Ð¢Ð•ÐœÐ« === */
    const body = document.body;
    const toggleBtn = document.getElementById("toggle-theme");

    const savedTheme = localStorage.getItem("theme");
    if (savedTheme) {
        body.className = savedTheme;
        toggleBtn.textContent = savedTheme === "dark" ? "â˜€" : "ðŸŒ™";
    }

    toggleBtn.onclick = () => {
        const newTheme = body.classList.contains("light") ? "dark" : "light";
        body.className = newTheme;
        toggleBtn.textContent = newTheme === "dark" ? "â˜€" : "ðŸŒ™";
        localStorage.setItem("theme", newTheme);
    };

    /* === JWT Ð›ÐžÐ“Ð˜ÐšÐ === */
    function generateFakeJWT(email) {
        return btoa(JSON.stringify({
            email,
            exp: Date.now() + 3600_000
        }));
    }

    const loginForm = document.getElementById("login-form");
    const app = document.getElementById("app");
    const userEmail = document.getElementById("user-email");

    function showApp(email) {
        loginForm.classList.add("hidden");
        app.classList.remove("hidden");
        userEmail.textContent = "Ð’Ñ‹ Ð²Ð¾ÑˆÐ»Ð¸ ÐºÐ°Ðº: " + email;
    }

    function showLogin() {
        loginForm.classList.remove("hidden");
        app.classList.add("hidden");
    }

    (function checkToken() {
        const token = localStorage.getItem("token");
        if (token) {
            try {
                const data = JSON.parse(atob(token));
                if (data.exp > Date.now()) return showApp(data.email);
            } catch {}
        }
        showLogin();
    })();

    document.getElementById("login-btn").onclick = () => {
        const email = document.getElementById("email").value.trim();
        const pwd = document.getElementById("password").value.trim();

        if (!email || !pwd) {
            alert("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð±Ð° Ð¿Ð¾Ð»Ñ!");
            return;
        }

        const token = generateFakeJWT(email);
        localStorage.setItem("token", token);
        showApp(email);
    };

    document.getElementById("logout-btn").onclick = () => {
        localStorage.removeItem("token");
        showLogin();
    };
</script>

</body>
</html>
